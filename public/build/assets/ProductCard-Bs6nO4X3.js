import{_ as X,p as Y,q as p,c as g,w as d,b as l,a as s,g as m,r as f,f as h,t as c,n as Z,m as k,i as w,d as n,F as A,e as P,y as N,C as H,o as r}from"./app-BZtcnNlK.js";import{S as tt}from"./ShareDialog-BxGL0YNK.js";import{r as et}from"./uploads-CnEkgyD_.js";import{f as ot,a as T}from"./formatters-DOdYL610.js";const at={class:"product-image-container position-relative bg-grey-lighten-4",style:{height:"200px",overflow:"hidden"}},rt={class:"position-absolute top-0 left-0 ma-2 z-index-2 d-flex flex-column gap-1"},st={class:"actions-overlay d-flex align-center justify-center gap-1"},it={class:"pa-4"},ct={class:"d-flex justify-space-between align-start mb-2"},lt={class:"text-caption font-weight-bold text-primary text-uppercase tracking-wide"},nt={key:0,class:"d-flex align-center gap-1"},ut={class:"text-caption font-weight-bold"},dt={key:0,class:"text-caption text-grey",style:{"font-size":"0.7rem"}},pt={key:0,class:"text-caption text-medium-emphasis mb-1",style:{"font-size":"0.7rem"}},mt={class:"text-subtitle-1 font-weight-bold text-grey-darken-4 mb-2 lh-tight",style:{"min-height":"40px"}},ft={key:1,class:"key-features-list mb-2"},ht={class:"feature-list"},vt={class:"feature-text"},gt={class:"text-caption text-medium-emphasis mb-2 line-clamp-2",style:{"min-height":"32px"}},yt={key:2,class:"mb-2"},bt={class:"d-flex flex-wrap gap-1"},xt={key:3,class:"specs-preview my-2 py-2 border-top border-bottom border-dashed"},_t={class:"d-flex flex-wrap gap-2"},kt={class:"spec-label"},wt={class:"spec-value"},zt={class:"d-flex align-center justify-space-between mt-3"},Ct={key:0},At={key:0,class:"d-flex flex-column"},Pt={class:"text-caption text-medium-emphasis text-decoration-line-through"},St={class:"text-subtitle-2 font-weight-black text-error"},$t={key:1},Ft={class:"text-subtitle-2 font-weight-black text-primary"},Mt={key:1,class:"text-subtitle-2 font-weight-bold text-primary"},Ut={__name:"ProductCard",props:{product:{type:Object,required:!0},comparisonDisabled:{type:Boolean,default:!1}},emits:["toggle-comparison"],setup(e){const j=H(),o=e,y=Y(!1),S=t=>!t||typeof t!="string"?null:et(t),D=t=>{if(!t)return null;if(Array.isArray(t))return t.length>0?t[0]:null;if(typeof t=="string")try{const a=JSON.parse(t);if(Array.isArray(a)&&a.length>0)return a[0]}catch{return t}return null},$=p(()=>{var a,u;let t=null;if((a=o.product)!=null&&a.thumbnail&&(t=S(o.product.thumbnail)),!t&&((u=o.product)!=null&&u.images)){const b=D(o.product.images);b&&(t=S(b))}return t||"/assets/img/default.jpg"}),B=p(()=>$.value==="/assets/img/default.jpg"),O=p(()=>o.product.categories&&o.product.categories.length>0?o.product.categories[0].name:"Uncategorized"),F=p(()=>{var t;return o.product.key_features&&Array.isArray(o.product.key_features)?o.product.key_features:(t=o.product.specifications)!=null&&t._key_features&&Array.isArray(o.product.specifications._key_features)?o.product.specifications._key_features:[]}),E=p(()=>o.product.price!==null&&o.product.price!==void 0&&o.product.price!==""||!!o.product.price_range),z=p(()=>ot(o.product,"Contact for Price")),M=p(()=>{const t=[];return o.product.specifications&&(o.product.specifications.capacity&&t.push({label:"Capacity",value:o.product.specifications.capacity}),o.product.specifications.input&&t.push({label:"Input",value:o.product.specifications.input}),o.product.specifications.type&&t.push({label:"Type",value:o.product.specifications.type})),t.slice(0,3)}),U=p(()=>`${window.location.origin}/products/${o.product.slug}`),V=p(()=>{const t=o.product.title||"Product",a=o.product.short_description||"",u=z.value;return`Check out ${t}${a?` - ${a}`:""}${u?` - ${u}`:""}`}),q=()=>{navigator.share?navigator.share({title:o.product.title,text:V.value,url:U.value}).catch(t=>{t.name!=="AbortError"&&(y.value=!0)}):y.value=!0},L=()=>{j.push(`/products/${o.product.slug}`)},R=t=>({wireless:"mdi-wifi",waterproof:"mdi-water",bluetooth:"mdi-bluetooth",rechargeable:"mdi-battery-charging",warranty:"mdi-shield-check",eco_friendly:"mdi-leaf"})[t]||"mdi-check-circle",J=t=>({out_of_stock:"error",pre_order:"warning",coming_soon:"info"})[t]||"success",G=t=>({in_stock:"In Stock",out_of_stock:"Out of Stock",pre_order:"Pre-Order",coming_soon:"Coming Soon"})[t]||t;return(t,a)=>{const u=f("v-chip"),b=f("v-img"),x=f("v-btn"),C=f("v-tooltip"),v=f("v-icon"),K=f("v-card"),Q=f("v-hover");return r(),g(Q,null,{default:d(({isHovering:I,props:W})=>[l(K,k(W,{elevation:I?8:2,class:"product-card h-100 bg-white rounded-xl overflow-hidden transition-all",onClick:L}),{default:d(()=>[s("div",at,[s("div",rt,[e.product.featured?(r(),g(u,{key:0,color:"amber-accent-4",variant:"flat",size:"x-small",class:"font-weight-bold",style:{"font-size":"0.65rem"}},{default:d(()=>a[4]||(a[4]=[h(" FEATURED ")])),_:1,__:[4]})):m("",!0),e.product.discount_percent>0?(r(),g(u,{key:1,color:"error",variant:"flat",size:"x-small",class:"font-weight-bold",style:{"font-size":"0.65rem"}},{default:d(()=>[h(" -"+c(Math.round(parseFloat(e.product.discount_percent)))+"% OFF ",1)]),_:1})):m("",!0)]),e.product.availability&&e.product.availability!=="in_stock"?(r(),g(u,{key:0,color:J(e.product.availability),variant:"flat",size:"x-small",class:"position-absolute top-0 right-0 ma-2 font-weight-bold z-index-2",style:{"font-size":"0.65rem"}},{default:d(()=>[h(c(G(e.product.availability)),1)]),_:1},8,["color"])):m("",!0),l(b,{src:$.value,alt:e.product.title,height:"100%",cover:"",class:Z(["product-img",{"product-img-zoom":I||B.value}])},null,8,["src","alt","class"]),s("div",st,[l(C,{text:"View product details",location:"top"},{activator:d(({props:i})=>[l(x,k({icon:"mdi-eye-outline",variant:"flat",color:"white",size:"x-small",class:"hover-scale"},i,{to:`/products/${e.product.slug}`,onClick:a[0]||(a[0]=w(()=>{},["stop"])),"aria-label":"View product details"}),null,16,["to"])]),_:1}),l(C,{text:"Add to comparison",location:"top"},{activator:d(({props:i})=>[l(x,k({icon:"mdi-scale-balance",variant:"flat",color:"primary",size:"x-small",class:"hover-scale"},i,{disabled:e.comparisonDisabled,onClick:a[1]||(a[1]=w(_=>t.$emit("toggle-comparison",e.product),["stop","prevent"])),"aria-label":"Add to comparison"}),null,16,["disabled"])]),_:1}),l(C,{text:"Share product",location:"top"},{activator:d(({props:i})=>[l(x,k({icon:"mdi-share-variant",variant:"flat",color:"success",size:"x-small",class:"hover-scale"},i,{onClick:w(q,["stop","prevent"]),"aria-label":"Share product"}),null,16)]),_:1})])]),s("div",it,[s("div",ct,[s("div",lt,c(O.value),1),e.product.rating&&e.product.rating>0?(r(),n("div",nt,[l(v,{icon:"mdi-star",color:"amber",size:"14"}),s("span",ut,c(parseFloat(e.product.rating).toFixed(1)),1),e.product.rating_count>0?(r(),n("span",dt," ("+c(e.product.rating_count)+") ",1)):m("",!0)])):m("",!0)]),e.product.brand?(r(),n("div",pt,[l(v,{icon:"mdi-tag",size:"10",class:"mr-1"}),h(" "+c(e.product.brand),1)])):m("",!0),s("h3",mt,c(e.product.title),1),F.value.length>0?(r(),n("div",ft,[s("ul",ht,[(r(!0),n(A,null,P(F.value.slice(0,4),(i,_)=>(r(),n("li",{key:_,class:"feature-item"},[l(v,{icon:"mdi-check-circle",size:"12",class:"feature-icon"}),s("span",vt,c(i),1)]))),128))])])):m("",!0),s("p",gt,c(e.product.short_description),1),e.product.features&&e.product.features.length>0?(r(),n("div",yt,[s("div",bt,[(r(!0),n(A,null,P(e.product.features.slice(0,2),i=>(r(),g(u,{key:i,size:"x-small",color:"primary",variant:"tonal",class:"text-capitalize"},{default:d(()=>[l(v,{icon:R(i),size:"10",class:"mr-1"},null,8,["icon"]),h(" "+c(i.replace("_"," ")),1)]),_:2},1024))),128))])])):m("",!0),M.value.length>0?(r(),n("div",xt,[s("div",_t,[(r(!0),n(A,null,P(M.value,(i,_)=>(r(),n("div",{key:_,class:"spec-badge"},[s("span",kt,c(i.label),1),s("span",wt,c(i.value),1)]))),128))])])):m("",!0),s("div",zt,[E.value?(r(),n("div",Ct,[e.product.discount_percent>0&&e.product.price?(r(),n("div",At,[s("span",Pt," Tk "+c(N(T)(e.product.price)),1),s("span",St," Tk "+c(N(T)(e.product.discounted_price||e.product.price)),1)])):(r(),n("div",$t,[s("span",Ft,c(z.value),1)]))])):(r(),n("div",Mt,c(z.value),1)),l(x,{variant:"text",color:"primary",class:"px-0 font-weight-bold text-capitalize text-caption",size:"small",to:`/products/${e.product.slug}`,onClick:a[2]||(a[2]=w(()=>{},["stop"]))},{default:d(()=>[a[5]||(a[5]=h(" View ")),l(v,{icon:"mdi-arrow-right",size:"x-small",class:"ml-1"})]),_:1,__:[5]},8,["to"])])])]),_:2},1040,["elevation"]),l(tt,{modelValue:y.value,"onUpdate:modelValue":a[3]||(a[3]=i=>y.value=i),title:e.product.title,url:U.value,"share-text":V.value},null,8,["modelValue","title","url","share-text"])]),_:1})}}},jt=X(Ut,[["__scopeId","data-v-46d78567"]]);export{jt as P};
