import{_ as X,p as Y,q as d,c as g,w as p,b as n,a,g as f,r as m,f as h,t as i,n as Z,m as w,i as z,d as c,F as C,e as A,z as N,B as H,o as s}from"./app-EL-kggDq.js";import{S as tt}from"./ShareDialog-C3XfJbSZ.js";import{r as et}from"./uploads-CnEkgyD_.js";import{f as ot,a as T}from"./formatters-DOdYL610.js";const rt={class:"product-image-container position-relative bg-grey-lighten-4",style:{height:"200px",overflow:"hidden"}},st={class:"position-absolute top-0 left-0 ma-2 z-index-2 d-flex flex-column gap-1"},at={class:"actions-overlay d-flex align-center justify-center gap-1"},it={class:"pa-4"},ct={class:"d-flex justify-space-between align-start mb-2"},lt={class:"text-caption font-weight-bold text-primary text-uppercase tracking-wide"},nt={key:0,class:"d-flex align-center gap-1"},ut={class:"text-caption font-weight-bold"},dt={key:0,class:"text-caption text-grey",style:{"font-size":"0.7rem"}},pt={key:0,class:"text-caption text-medium-emphasis mb-1",style:{"font-size":"0.7rem"}},ft={class:"text-subtitle-1 font-weight-bold text-grey-darken-4 mb-2 lh-tight",style:{"min-height":"40px"}},mt={key:1,class:"key-features-list mb-2"},ht={class:"feature-list"},vt={class:"feature-text"},gt={class:"text-caption text-medium-emphasis mb-2 line-clamp-2",style:{"min-height":"32px"}},yt={key:2,class:"mb-2"},bt={class:"d-flex flex-wrap gap-1"},xt={key:3,class:"specs-preview my-2 py-2 border-top border-bottom border-dashed"},_t={class:"d-flex flex-wrap gap-2"},kt={class:"spec-label"},wt={class:"spec-value"},zt={class:"d-flex align-center justify-space-between mt-3"},Ct={key:0},At={key:0,class:"d-flex flex-column"},Pt={class:"text-caption text-medium-emphasis text-decoration-line-through"},St={class:"text-subtitle-2 font-weight-black text-error"},Ft={key:1},Mt={class:"text-subtitle-2 font-weight-black text-primary"},Ut={key:1,class:"text-subtitle-2 font-weight-bold text-primary"},Vt={__name:"ProductCard",props:{product:{type:Object,required:!0}},setup(o){const j=H(),e=o,y=Y(!1),P=t=>!t||typeof t!="string"?null:et(t),B=t=>{if(!t)return null;if(Array.isArray(t))return t.length>0?t[0]:null;if(typeof t=="string")try{const r=JSON.parse(t);if(Array.isArray(r)&&r.length>0)return r[0]}catch{return t}return null},S=d(()=>{var r,u;let t=null;if((r=e.product)!=null&&r.thumbnail&&(t=P(e.product.thumbnail)),!t&&((u=e.product)!=null&&u.images)){const b=B(e.product.images);b&&(t=P(b))}return t||"/assets/img/default.jpg"}),O=d(()=>S.value==="/assets/img/default.jpg"),D=d(()=>e.product.categories&&e.product.categories.length>0?e.product.categories[0].name:"Uncategorized"),F=d(()=>{var t;return e.product.key_features&&Array.isArray(e.product.key_features)?e.product.key_features:(t=e.product.specifications)!=null&&t._key_features&&Array.isArray(e.product.specifications._key_features)?e.product.specifications._key_features:[]}),E=d(()=>e.product.price!==null&&e.product.price!==void 0&&e.product.price!==""||!!e.product.price_range),x=d(()=>ot(e.product,"Contact for Price")),M=d(()=>{const t=[];return e.product.specifications&&(e.product.specifications.capacity&&t.push({label:"Capacity",value:e.product.specifications.capacity}),e.product.specifications.input&&t.push({label:"Input",value:e.product.specifications.input}),e.product.specifications.type&&t.push({label:"Type",value:e.product.specifications.type})),t.slice(0,3)}),U=d(()=>`${window.location.origin}/products/${e.product.slug}`),V=d(()=>{const t=e.product.title||"Product",r=e.product.short_description||"",u=x.value;return`Check out ${t}${r?` - ${r}`:""}${u?` - ${u}`:""}`}),q=()=>{navigator.share?navigator.share({title:e.product.title,text:V.value,url:U.value}).catch(t=>{t.name!=="AbortError"&&(y.value=!0)}):y.value=!0},L=()=>{j.push(`/products/${e.product.slug}`)},R=t=>({wireless:"mdi-wifi",waterproof:"mdi-water",bluetooth:"mdi-bluetooth",rechargeable:"mdi-battery-charging",warranty:"mdi-shield-check",eco_friendly:"mdi-leaf"})[t]||"mdi-check-circle",J=t=>({out_of_stock:"error",pre_order:"warning",coming_soon:"info"})[t]||"success",G=t=>({in_stock:"In Stock",out_of_stock:"Out of Stock",pre_order:"Pre-Order",coming_soon:"Coming Soon"})[t]||t;return(t,r)=>{const u=m("v-chip"),b=m("v-img"),_=m("v-btn"),$=m("v-tooltip"),v=m("v-icon"),K=m("v-card"),Q=m("v-hover");return s(),g(Q,null,{default:p(({isHovering:I,props:W})=>[n(K,w(W,{elevation:I?8:2,class:"product-card h-100 bg-white rounded-xl overflow-hidden transition-all",onClick:L}),{default:p(()=>[a("div",rt,[a("div",st,[o.product.featured?(s(),g(u,{key:0,color:"amber-accent-4",variant:"flat",size:"x-small",class:"font-weight-bold",style:{"font-size":"0.65rem"}},{default:p(()=>[...r[3]||(r[3]=[h(" FEATURED ",-1)])]),_:1})):f("",!0),o.product.discount_percent>0?(s(),g(u,{key:1,color:"error",variant:"flat",size:"x-small",class:"font-weight-bold",style:{"font-size":"0.65rem"}},{default:p(()=>[h(" -"+i(Math.round(parseFloat(o.product.discount_percent)))+"% OFF ",1)]),_:1})):f("",!0)]),o.product.availability&&o.product.availability!=="in_stock"?(s(),g(u,{key:0,color:J(o.product.availability),variant:"flat",size:"x-small",class:"position-absolute top-0 right-0 ma-2 font-weight-bold z-index-2",style:{"font-size":"0.65rem"}},{default:p(()=>[h(i(G(o.product.availability)),1)]),_:1},8,["color"])):f("",!0),n(b,{src:S.value,alt:o.product.title,height:"100%",cover:"",class:Z(["product-img",{"product-img-zoom":I||O.value}])},null,8,["src","alt","class"]),a("div",at,[n($,{text:"View product details",location:"top"},{activator:p(({props:l})=>[n(_,w({icon:"mdi-eye-outline",variant:"flat",color:"white",size:"x-small",class:"hover-scale"},l,{to:`/products/${o.product.slug}`,onClick:r[0]||(r[0]=z(()=>{},["stop"])),"aria-label":"View product details"}),null,16,["to"])]),_:1}),n($,{text:"Share product",location:"top"},{activator:p(({props:l})=>[n(_,w({icon:"mdi-share-variant",variant:"flat",color:"success",size:"x-small",class:"hover-scale"},l,{onClick:z(q,["stop","prevent"]),"aria-label":"Share product"}),null,16)]),_:1})])]),a("div",it,[a("div",ct,[a("div",lt,i(D.value),1),o.product.rating&&o.product.rating>0?(s(),c("div",nt,[n(v,{icon:"mdi-star",color:"amber",size:"14"}),a("span",ut,i(parseFloat(o.product.rating).toFixed(1)),1),o.product.rating_count>0?(s(),c("span",dt," ("+i(o.product.rating_count)+") ",1)):f("",!0)])):f("",!0)]),o.product.brand?(s(),c("div",pt,[n(v,{icon:"mdi-tag",size:"10",class:"mr-1"}),h(" "+i(o.product.brand),1)])):f("",!0),a("h3",ft,i(o.product.title),1),F.value.length>0?(s(),c("div",mt,[a("ul",ht,[(s(!0),c(C,null,A(F.value.slice(0,4),(l,k)=>(s(),c("li",{key:k,class:"feature-item"},[n(v,{icon:"mdi-check-circle",size:"12",class:"feature-icon"}),a("span",vt,i(l),1)]))),128))])])):f("",!0),a("p",gt,i(o.product.short_description),1),o.product.features&&o.product.features.length>0?(s(),c("div",yt,[a("div",bt,[(s(!0),c(C,null,A(o.product.features.slice(0,2),l=>(s(),g(u,{key:l,size:"x-small",color:"primary",variant:"tonal",class:"text-capitalize"},{default:p(()=>[n(v,{icon:R(l),size:"10",class:"mr-1"},null,8,["icon"]),h(" "+i(l.replace("_"," ")),1)]),_:2},1024))),128))])])):f("",!0),M.value.length>0?(s(),c("div",xt,[a("div",_t,[(s(!0),c(C,null,A(M.value,(l,k)=>(s(),c("div",{key:k,class:"spec-badge"},[a("span",kt,i(l.label),1),a("span",wt,i(l.value),1)]))),128))])])):f("",!0),a("div",zt,[E.value?(s(),c("div",Ct,[o.product.discount_percent>0&&o.product.price?(s(),c("div",At,[a("span",Pt," Tk "+i(N(T)(o.product.price)),1),a("span",St," Tk "+i(N(T)(o.product.discounted_price||o.product.price)),1)])):(s(),c("div",Ft,[a("span",Mt,i(x.value),1)]))])):(s(),c("div",Ut,i(x.value),1)),n(_,{variant:"text",color:"primary",class:"px-0 font-weight-bold text-capitalize text-caption",size:"small",to:`/products/${o.product.slug}`,onClick:r[1]||(r[1]=z(()=>{},["stop"]))},{default:p(()=>[r[4]||(r[4]=h(" View ",-1)),n(v,{icon:"mdi-arrow-right",size:"x-small",class:"ml-1"})]),_:1},8,["to"])])])]),_:2},1040,["elevation"]),n(tt,{modelValue:y.value,"onUpdate:modelValue":r[2]||(r[2]=l=>y.value=l),title:o.product.title,url:U.value,"share-text":V.value},null,8,["modelValue","title","url","share-text"])]),_:1})}}},jt=X(Vt,[["__scopeId","data-v-b153e581"]]);export{jt as P};
